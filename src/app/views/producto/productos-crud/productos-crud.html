<p-toast></p-toast>
<div class="container">

  <form class="row g-3 needs-validation" [formGroup]="form" (ngSubmit)="accion($event)" novalidate>
    
    <div class="col-md-12" hidden>
      <label for="id" class="form-label">Id</label>
      <input id="id" type="text" formControlName="id" class="form-control" placeholder="id" />
      @if (get('id')?.invalid && get('id')?.touched) {
      <div class="invalid-feedback">Debe ingresar un id.</div>
      }
    </div>

    <div class="col-md-2">
      <label for="sigla" class="form-label">Sigla</label>
      <input id="sigla" type="text" formControlName="sigla" class="form-control" placeholder="sigla" (input)="onUppercaseInput($event, 'sigla')" required />
      @if (get('sigla')?.invalid && get('sigla')?.touched) {
      <div class="invalid-feedback">Debe ingresar una sigla.</div>
      }
    </div>

    <div class="col-md-4">
      <label for="nombre" class="form-label">Nombre</label>
      <input id="nombre" type="text" formControlName="nombre" class="form-control" placeholder="nombre" required />
      @if (get('nombre')?.invalid && get('nombre')?.touched) {
      <div class="invalid-feedback">Debe ingresar un nombre.</div>
      }
    </div>

    <div class="col-md-4">
      <label for="entornoCodigo" class="form-label">Entorno</label>
      <!-- <input
        id="entornoCodigo"
        type="text"
        formControlName="entornoCodigo"
        class="form-control"
        placeholder="entornoCodigo"
        required
      /> -->
      <select class="form-control" formControlName="entornoCodigo" id="entornoCodigo">
        <option [ngValue]="null">-- Seleccionar --</option>
        @for (e of entornos; track e.codigo) {
          <option [ngValue]="e.codigo">{{ e.codigo }} - {{ e.nombre }}</option>
        }
      </select>
      @if (get('entornoCodigo')?.invalid && get('entornoCodigo')?.touched) {
      <div class="invalid-feedback">Debe ingresar un entorno v√°lido.</div>
      }
    </div>

    <div class="col-md-2">
        <label for="activo" class="form-label">Activo</label>
        <div class="mb-2">
          <input id="activo" type="checkbox" formControlName="activo" class="btn-check" />
          <label class="btn btn-outline-primary" for="activo">
            @if (get('activo')?.value){
            ACTIVO
            } @else {
            DESACTIVO
            }
          </label>
        </div>
    </div>

    <div class="col-12 mb-5">
      <button class="btn btn-primary" type="submit">
        @if (modo === 'A') {
        Crear
        } @else if (modo === 'M') {
        Modificar
        }
      </button>
    </div>
  </form>
</div>